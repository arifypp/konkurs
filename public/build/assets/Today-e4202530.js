import{Q as H,J as j,P as q,Z as J,p as Q,K as S,b as _,r as n,o as O,g as Z,c as o,w as e,h as G,N as p,M as R,O as D,f as c,n as g,t as C,a as N,e as X}from"./app-7167d098.js";import{_ as $}from"./AuthenticatedLayout-d1fc43bf.js";import ee from"./Add-2d56f505.js";import{M as oe,h as ne}from"./moment-1620f7c0.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";import{S as se,F as ae,E as re}from"./SendOutlined-0302dfcc.js";import"./SaveOutlined-4333f22b.js";const le={components:{AuthenticatedLayout:$,MailOutlined:oe,CalendarOutlined:H,SendOutlined:se,FileExcelOutlined:ae,ExportOutlined:re,DeleteOutlined:j,PlusOutlined:q,Head:J,Link:Q,Add:ee},setup(){const l=S().props.konkursData,u=_(!1),v=_(!1),a=_(S().props.konkursCategories),b=t=>{const s=a.value.find(d=>d.id==t);return s?s.name:""},E=_([{title:"Company Name",dataIndex:"konkurs_name",key:"konkurs_name",slots:{customRender:"konkurs_name"}},{title:"Ad. Name",dataIndex:"konkurs_advocate",key:"konkurs_advocate",slots:{customRender:"konkurs_advocate"}},{title:"Ad. Email",dataIndex:"konkurs_advocate_email",key:"konkurs_advocate_email",slots:{customRender:"konkurs_advocate_email"}},{title:"Org Number",dataIndex:"konkurs_phone",key:"konkurs_phone",slots:{customRender:"konkurs_phone"}},{title:"Location",dataIndex:"konkurs_category_id",key:"konkurs_category_id",slots:{customRender:"konkurs_category_id"}},{title:"Email Status",dataIndex:"email_send",key:"email_send",slots:{customRender:"email_send"}},{title:"Date",dataIndex:"created_at",key:"created_at",slots:{customRender:"created_at"}},{title:"Action",dataIndex:"action",key:"action",slots:{customRender:"action"}}]),x=()=>{v.value=!0},w=t=>{console.log("click ",t),h.value=t.key,K.value=t.keyPath},h=_([]),K=_(["sub1"])??[],i=t=>{const s=t.find(d=>this.openKeys.indexOf(d)===-1);this.rootSubmenuKeys.indexOf(s)===-1?this.openKeys=t:this.openKeys=s?[s]:[]},k=_({onChange:(t,s)=>{k.value.selectedRowKeys=t,console.log(`selectedRowKeys: ${t}`,"selectedRows: ",s)},onSelect:(t,s,d)=>{console.log(t,s,d)},onSelectAll:(t,s,d)=>{console.log(t,s,d)}});return{AddKonkursVisible:v,AddKonkursDrawer:x,handleClick:w,selectedKeys:h,openKeys:K,onOpenChange:i,TodayKonkurs:l,columns:E,loading:u,moment:ne,categories:a,getCategoryName:b,rowSelection:k,SendKonkursMail:t=>{const s=route("user.konkurs.sendmail",{id:t});R.confirm({title:"Are you sure you want to send mail?",content:"When clicked the OK button, this dialog will be closed after 1 second",okText:"OK",cancelText:"Cancel",onOk:()=>{u.value=!0,D.get(s,{onSuccess:()=>{u.value=!1,p.success("Mail Sent Successfully")},onError:()=>{u.value=!1,p.error("Something Went Wrong")}})}})},ExportToExcel:()=>{if(k.value.selectedRowKeys&&k.value.selectedRowKeys.length>0){const t=k.value.selectedRowKeys,s=route("user.konkurs.export",{id:t}),d=document.createElement("a");d.href=s,d.download="konkursdata.xlsx",d.click(),d.remove(),p.success("Exported Successfully")}else p.error("Please Select At Least One Row")},deleteKonkurs:t=>{const s=route("user.konkurs.destroy",{id:t});R.confirm({title:"Are you sure delete this Konkurs Category?",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>{D.delete(s,{preserveScroll:!0,onSuccess:d=>{d.value=S().props.konkursData,p.success("Konkurs Deleted Successfully")},onError:()=>{p.error("Something Went Wrong")}})}})}}}};function de(l,u,v,a,b,E){const x=n("Head"),w=n("Add"),h=n("a-breadcrumb-item"),K=n("PlusOutlined"),i=n("a-button"),k=n("MailOutlined"),m=n("Link"),y=n("a-menu-item"),f=n("CalendarOutlined"),t=n("a-menu"),s=n("a-col"),d=n("a-card-meta"),I=n("a-divider"),L=n("file-excel-outlined"),V=n("export-outlined"),A=n("a-space"),M=n("a-tag"),Y=n("send-outlined"),T=n("a-tooltip"),P=n("delete-outlined"),z=n("a-table"),W=n("a-card"),B=n("a-row"),U=n("AuthenticatedLayout");return O(),Z(G,null,[o(x,{title:"Today Konkkurs"}),o(U,null,{header:e(()=>[o(h,null,{default:e(()=>[c("Manage Konkurs")]),_:1}),o(i,{type:"primary",style:{float:"right"},onClick:a.AddKonkursDrawer},{icon:e(()=>[o(K)]),default:e(()=>[c(" Add Konkurs ")]),_:1},8,["onClick"])]),default:e(()=>[o(w,{visible:a.AddKonkursVisible,onClose:u[0]||(u[0]=r=>a.AddKonkursVisible=!1)},null,8,["visible"]),o(B,{type:"flex",gutter:"16"},{default:e(()=>[o(s,{span:5,order:1},{default:e(()=>[o(t,{openKeys:a.openKeys,"onUpdate:openKeys":u[1]||(u[1]=r=>a.openKeys=r),selectedKeys:a.selectedKeys,"onUpdate:selectedKeys":u[2]||(u[2]=r=>a.selectedKeys=r),mode:"vertical",style:{width:"100%",height:"100vh"}},{default:e(()=>[o(y,{key:"1",class:g({"ant-menu-item-selected":l.route().current("user.konkurs.index")})},{icon:e(()=>[o(k)]),default:e(()=>[o(m,{href:l.route("user.konkurs.index")},{default:e(()=>[c(" All Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),o(y,{key:"2",class:g({"ant-menu-item-selected":l.route().current("user.konkurs.today")})},{icon:e(()=>[o(f)]),default:e(()=>[o(m,{href:l.route("user.konkurs.today")},{default:e(()=>[c(" Today Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),o(y,{key:"3",class:g({"ant-menu-item-selected":l.route().current("user.konkurs.yesterday")})},{icon:e(()=>[o(f)]),default:e(()=>[o(m,{href:l.route("user.konkurs.yesterday")},{default:e(()=>[c(" Yesterday Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),o(y,{key:"4",class:g({"ant-menu-item-selected":l.route().current("user.konkurs.monthly")})},{icon:e(()=>[o(f)]),default:e(()=>[o(m,{href:l.route("user.konkurs.monthly")},{default:e(()=>[c(" Monthly Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),o(y,{key:"5",class:g({"ant-menu-item-selected":l.route().current("user.konkurs.yearly")})},{icon:e(()=>[o(f)]),default:e(()=>[o(m,{href:l.route("user.konkurs.yearly")},{default:e(()=>[c(" Yearly Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"])]),_:1},8,["openKeys","selectedKeys"])]),_:1}),o(s,{span:19,order:2},{default:e(()=>[o(W,{style:{width:"100%",height:"100%",padding:"0px"}},{default:e(()=>[o(d,{title:"Today Konkurs List",description:"https://w2.brreg.no/kunngjoring/index.jsp"}),o(I),o(A,{style:{"margin-bottom":"16px"}},{default:e(()=>[o(i,{type:"primary",onClick:a.ExportToExcel},{icon:e(()=>[o(L)]),default:e(()=>[c(" Export to Excel ")]),_:1},8,["onClick"]),o(i,{type:"primary",onClick:l.ExportToCSV},{icon:e(()=>[o(V)]),default:e(()=>[c(" Export to CSV ")]),_:1},8,["onClick"])]),_:1}),o(z,{columns:a.columns,"data-source":a.TodayKonkurs,pagination:l.pagination,loading:a.loading,showSizeChanger:"true","row-selection":a.rowSelection,rowKey:r=>r.id,onChange:l.handleTableChange},{konkurs_name:e(({text:r})=>[o(m,{href:l.route("user.konkurs.show",r)},{default:e(()=>[c(C(r)+" "+C(r.length>10?"...":""),1)]),_:2},1032,["href"])]),created_at:e(({text:r})=>[c(C(a.moment(r).format("DD MMMM, YYYY")),1)]),konkurs_category_id:e(({text:r})=>[c(C(a.getCategoryName(r)),1)]),email_send:e(({text:r})=>[r==1?(O(),N(M,{key:0,color:"green"},{default:e(()=>[c("Yes")]),_:1})):(O(),N(M,{key:1,color:"red"},{default:e(()=>[c("No")]),_:1}))]),action:e(({record:r})=>[X("span",null,[o(A,{size:"middle"},{default:e(()=>[o(T,{title:"Send Mail"},{default:e(()=>[o(i,{type:"primary",size:"medium",shape:"square",onClick:F=>a.SendKonkursMail(r.id)},{icon:e(()=>[o(Y)]),_:2},1032,["onClick"])]),_:2},1024),o(T,{title:"Delete"},{default:e(()=>[o(i,{type:"danger",size:"medium",shape:"square",onClick:F=>a.deleteKonkurs(r.id)},{icon:e(()=>[o(P)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["columns","data-source","pagination","loading","row-selection","rowKey","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const pe=te(le,[["render",de]]);export{pe as default};
