import{P as W,Q as B,J as P,Z as F,p as H,K as v,b as i,r as a,o as S,g as j,c as t,w as e,h as q,N as k,M as T,O as M,f as c,t as y,a as R,e as U}from"./app-58ea7a43.js";import{_ as J}from"./AuthenticatedLayout-bcf99958.js";import Q from"./Add-06058288.js";import{M as Z,h as G}from"./moment-21f47b9e.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{S as $,F as ee,E as oe}from"./SendOutlined-d874c409.js";import"./SaveOutlined-d9ae29db.js";const te={components:{AuthenticatedLayout:J,PlusOutlined:W,MailOutlined:Z,CalendarOutlined:B,SendOutlined:$,FileExcelOutlined:ee,ExportOutlined:oe,DeleteOutlined:P,Head:F,Link:H,Add:Q},setup(){const m=v().props.konkursData,u=i(!1),g=i(!1),s=i(v().props.konkursCategories),w=o=>{const n=s.value.find(l=>l.id==o);return n?n.name:""},b=i([{title:"Company Name",dataIndex:"konkurs_name",key:"konkurs_name",slots:{customRender:"konkurs_name"}},{title:"Ad. Name",dataIndex:"konkurs_advocate",key:"konkurs_advocate",slots:{customRender:"konkurs_advocate"}},{title:"Ad. Email",dataIndex:"konkurs_advocate_email",key:"konkurs_advocate_email",slots:{customRender:"konkurs_advocate_email"}},{title:"Org Number",dataIndex:"konkurs_phone",key:"konkurs_phone",slots:{customRender:"konkurs_phone"}},{title:"Location",dataIndex:"konkurs_category_id",key:"konkurs_category_id",slots:{customRender:"konkurs_category_id"}},{title:"Email Status",dataIndex:"email_send",key:"email_send",slots:{customRender:"email_send"}},{title:"Date",dataIndex:"created_at",key:"created_at",slots:{customRender:"created_at"}},{title:"Action",dataIndex:"action",key:"action",slots:{customRender:"action"}}]),f=i({current:1,pageSize:10,total:0,showSizeChanger:!0,showTotal:(o,n)=>`Showing ${n[0]}-${n[1]} of ${o} items`}),h=()=>{g.value=!0},x=o=>{console.log("click ",o),p.value=o.key,d.value=o.keyPath},p=i([]),d=i(["sub1"])??[],K=o=>{const n=o.find(l=>this.openKeys.indexOf(l)===-1);this.rootSubmenuKeys.indexOf(n)===-1?this.openKeys=o:this.openKeys=n?[n]:[]},_=i({onChange:(o,n)=>{_.value.selectedRowKeys=o,console.log(`selectedRowKeys: ${o}`,"selectedRows: ",n)},onSelect:(o,n,l)=>{console.log(o,n,l)},onSelectAll:(o,n,l)=>{console.log(o,n,l)}});return{AddKonkursVisible:g,AddKonkursDrawer:h,handleClick:x,selectedKeys:p,openKeys:d,onOpenChange:K,TodayKonkurs:m,columns:b,loading:u,pagination:f,moment:G,categories:s,getCategoryName:w,rowSelection:_,SendKonkursMail:o=>{const n=route("user.konkurs.sendmail",{id:o});T.confirm({title:"Are you sure you want to send mail?",content:"When clicked the OK button, this dialog will be closed after 1 second",okText:"OK",cancelText:"Cancel",onOk:()=>{u.value=!0,M.get(n,{onSuccess:()=>{u.value=!1,k.success("Mail Sent Successfully")},onError:()=>{u.value=!1,k.error("Something Went Wrong")}})}})},ExportToExcel:()=>{if(_.value.selectedRowKeys&&_.value.selectedRowKeys.length>0){const o=_.value.selectedRowKeys,n=route("user.konkurs.export",{id:o}),l=document.createElement("a");l.href=n,l.download="konkursdata.xlsx",l.click(),l.remove(),k.success("Exported Successfully")}else k.error("Please Select At Least One Row")},deleteKonkurs:o=>{const n=route("user.konkurs.destroy",{id:o});T.confirm({title:"Are you sure delete this Konkurs Category?",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>{M.delete(n,{preserveScroll:!0,onSuccess:l=>{l.value=v().props.konkursData,k.success("Konkurs Deleted Successfully")},onError:()=>{k.error("Something Went Wrong")}})}})}}}};function ne(m,u,g,s,w,b){const f=a("Head"),h=a("Add"),x=a("a-breadcrumb-item"),p=a("plus-outlined"),d=a("a-button"),K=a("a-card-meta"),_=a("a-divider"),E=a("file-excel-outlined"),A=a("export-outlined"),C=a("a-space"),o=a("Link"),n=a("a-tag"),l=a("send-outlined"),O=a("a-tooltip"),D=a("delete-outlined"),N=a("a-table"),I=a("a-card"),L=a("a-col"),V=a("a-row"),Y=a("AuthenticatedLayout");return S(),j(q,null,[t(f,{title:"Yesterday Konkkurs"}),t(Y,null,{header:e(()=>[t(x,null,{default:e(()=>[c("Manage Konkurs")]),_:1}),t(d,{type:"primary",style:{float:"right"},onClick:s.AddKonkursDrawer},{icon:e(()=>[t(p)]),default:e(()=>[c(" Add Konkurs ")]),_:1},8,["onClick"])]),default:e(()=>[t(h,{visible:s.AddKonkursVisible,onClose:u[0]||(u[0]=r=>s.AddKonkursVisible=!1)},null,8,["visible"]),t(V,{type:"flex",gutter:"16"},{default:e(()=>[t(L,{span:24,order:2},{default:e(()=>[t(I,{style:{width:"100%",height:"100%",padding:"0px"}},{default:e(()=>[t(K,{title:"Today Konkurs List",description:"https://w2.brreg.no/kunngjoring/index.jsp"}),t(_),t(C,{style:{"margin-bottom":"16px"}},{default:e(()=>[t(d,{type:"primary",onClick:s.ExportToExcel},{icon:e(()=>[t(E)]),default:e(()=>[c(" Export to Excel ")]),_:1},8,["onClick"]),t(d,{type:"primary",onClick:m.ExportToCSV},{icon:e(()=>[t(A)]),default:e(()=>[c(" Export to CSV ")]),_:1},8,["onClick"])]),_:1}),t(N,{columns:s.columns,"data-source":s.TodayKonkurs,pagination:s.pagination,loading:s.loading,"row-selection":s.rowSelection,rowKey:r=>r.id,onChange:m.handleTableChange},{konkurs_name:e(({text:r})=>[t(o,{href:m.route("user.konkurs.show",r)},{default:e(()=>[c(y(r)+" "+y(r.length>10?"...":""),1)]),_:2},1032,["href"])]),created_at:e(({text:r})=>[c(y(s.moment(r).format("DD MMMM, YYYY")),1)]),konkurs_category_id:e(({text:r})=>[c(y(s.getCategoryName(r)),1)]),email_send:e(({text:r})=>[r==1?(S(),R(n,{key:0,color:"green"},{default:e(()=>[c("Yes")]),_:1})):(S(),R(n,{key:1,color:"red"},{default:e(()=>[c("No")]),_:1}))]),action:e(({record:r})=>[U("span",null,[t(C,{size:"middle"},{default:e(()=>[t(O,{title:"Send Mail"},{default:e(()=>[t(d,{type:"primary",size:"medium",shape:"square",onClick:z=>s.SendKonkursMail(r.id)},{icon:e(()=>[t(l)]),_:2},1032,["onClick"])]),_:2},1024),t(O,{title:"Delete"},{default:e(()=>[t(d,{type:"danger",size:"medium",shape:"square",onClick:z=>s.deleteKonkurs(r.id)},{icon:e(()=>[t(D)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["columns","data-source","pagination","loading","row-selection","rowKey","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ue=X(te,[["render",ne]]);export{ue as default};
