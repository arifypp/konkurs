import{Q as q,J,P as Q,Z,p as G,b as k,K as E,r as a,o as A,g as X,c as e,w as o,h as $,N as p,M as V,O as L,f as u,n as f,e as Y,t as v,z as ee,a as z}from"./app-29aaa455.js";import{_ as oe}from"./AuthenticatedLayout-b84e93de.js";import ne from"./Add-6fd72ac0.js";import te from"./Show-17e10d6e.js";import{M as se,h as ae}from"./moment-c1fc7302.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";import{S as re,F as de,E as ue}from"./SendOutlined-31a92412.js";import"./SaveOutlined-6c3d2f97.js";const ce={components:{AuthenticatedLayout:oe,MailOutlined:se,CalendarOutlined:q,SendOutlined:re,FileExcelOutlined:de,ExportOutlined:ue,DeleteOutlined:J,PlusOutlined:Q,Head:Z,Link:G,Add:ne,Show:te},setup(){const d=k(null),c=k(null),M=E().props.konkursData,t=k(!1),w=k(!1),S=k(E().props.konkursCategories),h=k(!1),C=n=>{const s=S.value.find(r=>r.id==n);return s?s.name:""},x=k([{title:"Company Name",dataIndex:"konkurs_name",key:"konkurs_name",slots:{customRender:"konkurs_name"}},{title:"Ad. Name",dataIndex:"konkurs_advocate",key:"konkurs_advocate",slots:{customRender:"konkurs_advocate"}},{title:"Ad. Email",dataIndex:"konkurs_advocate_email",key:"konkurs_advocate_email",slots:{customRender:"konkurs_advocate_email"}},{title:"Org Number",dataIndex:"konkurs_phone",key:"konkurs_phone",slots:{customRender:"konkurs_phone"}},{title:"Location",dataIndex:"konkurs_category_id",key:"konkurs_category_id",slots:{customRender:"konkurs_category_id"}},{title:"Email Status",dataIndex:"email_send",key:"email_send",slots:{customRender:"email_send"}},{title:"Date",dataIndex:"created_at",key:"created_at",slots:{customRender:"created_at"}},{title:"Action",dataIndex:"action",key:"action",slots:{customRender:"action"}}]),b=()=>{w.value=!0},_=n=>{console.log("click ",n),g.value=n.key,m.value=n.keyPath},g=k([]),m=k(["sub1"])??[],y=n=>{const s=n.find(r=>this.openKeys.indexOf(r)===-1);this.rootSubmenuKeys.indexOf(s)===-1?this.openKeys=n:this.openKeys=s?[s]:[]},i=k({onChange:(n,s)=>{i.value.selectedRowKeys=n,console.log(`selectedRowKeys: ${n}`,"selectedRows: ",s)},onSelect:(n,s,r)=>{console.log(n,s,r)},onSelectAll:(n,s,r)=>{console.log(n,s,r)}});return{ShowKonkursVisible:h,ShowKonkur:n=>{h.value=!0,d.value=n,axios.get(route("user.konkurs.show",{id:n})).then(s=>{console.log(s.data),c.value=s.data}).catch(s=>{console.log(s)})},konkurs:c,AddKonkursVisible:w,AddKonkursDrawer:b,handleClick:_,selectedKeys:g,openKeys:m,onOpenChange:y,TodayKonkurs:M,columns:x,loading:t,moment:ae,categories:S,getCategoryName:C,rowSelection:i,SendKonkursMail:n=>{const s=route("user.konkurs.sendmail",{id:n});V.confirm({title:"Are you sure you want to send mail?",content:"When clicked the OK button, this dialog will be closed after 1 second",okText:"OK",cancelText:"Cancel",onOk:()=>{t.value=!0,L.get(s,{onSuccess:()=>{t.value=!1,p.success("Mail Sent Successfully")},onError:()=>{t.value=!1,p.error("Something Went Wrong")}})}})},ExportToExcel:()=>{if(i.value.selectedRowKeys&&i.value.selectedRowKeys.length>0){const n=i.value.selectedRowKeys,s=route("user.konkurs.export",{id:n}),r=document.createElement("a");r.href=s,r.download="konkursdata.xlsx",r.click(),r.remove(),p.success("Exported Successfully")}else p.error("Please Select At Least One Row")},deleteKonkurs:n=>{const s=route("user.konkurs.destroy",{id:n});V.confirm({title:"Are you sure delete this Konkurs Category?",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>{L.delete(s,{preserveScroll:!0,onSuccess:r=>{r.value=E().props.konkursData,p.success("Konkurs Deleted Successfully")},onError:()=>{p.error("Something Went Wrong")}})}})}}}},ie=["href","onClick"];function ke(d,c,M,t,w,S){const h=a("Head"),C=a("Add"),x=a("a-breadcrumb-item"),b=a("PlusOutlined"),_=a("a-button"),g=a("MailOutlined"),m=a("Link"),y=a("a-menu-item"),i=a("CalendarOutlined"),T=a("a-menu"),O=a("a-col"),R=a("a-card-meta"),D=a("a-divider"),n=a("file-excel-outlined"),s=a("export-outlined"),r=a("a-space"),I=a("a-tag"),P=a("send-outlined"),N=a("a-tooltip"),W=a("delete-outlined"),B=a("a-table"),U=a("Show"),F=a("a-card"),H=a("a-row"),j=a("AuthenticatedLayout");return A(),X($,null,[e(h,{title:"Today Konkkurs"}),e(j,null,{header:o(()=>[e(x,null,{default:o(()=>[u("Manage Konkurs")]),_:1}),e(_,{type:"primary",style:{float:"right"},onClick:t.AddKonkursDrawer},{icon:o(()=>[e(b)]),default:o(()=>[u(" Add Konkurs ")]),_:1},8,["onClick"])]),default:o(()=>[e(C,{visible:t.AddKonkursVisible,onClose:c[0]||(c[0]=l=>t.AddKonkursVisible=!1)},null,8,["visible"]),e(H,{type:"flex",gutter:"16"},{default:o(()=>[e(O,{span:5,order:1},{default:o(()=>[e(T,{openKeys:t.openKeys,"onUpdate:openKeys":c[1]||(c[1]=l=>t.openKeys=l),selectedKeys:t.selectedKeys,"onUpdate:selectedKeys":c[2]||(c[2]=l=>t.selectedKeys=l),mode:"vertical",style:{width:"100%",height:"100vh"}},{default:o(()=>[e(y,{key:"1",class:f({"ant-menu-item-selected":d.route().current("user.konkurs.index")})},{icon:o(()=>[e(g)]),default:o(()=>[e(m,{href:d.route("user.konkurs.index")},{default:o(()=>[u(" All Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),e(y,{key:"2",class:f({"ant-menu-item-selected":d.route().current("user.konkurs.today")})},{icon:o(()=>[e(i)]),default:o(()=>[e(m,{href:d.route("user.konkurs.today")},{default:o(()=>[u(" Today Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),e(y,{key:"3",class:f({"ant-menu-item-selected":d.route().current("user.konkurs.yesterday")})},{icon:o(()=>[e(i)]),default:o(()=>[e(m,{href:d.route("user.konkurs.yesterday")},{default:o(()=>[u(" Yesterday Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),e(y,{key:"4",class:f({"ant-menu-item-selected":d.route().current("user.konkurs.monthly")})},{icon:o(()=>[e(i)]),default:o(()=>[e(m,{href:d.route("user.konkurs.monthly")},{default:o(()=>[u(" Monthly Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"]),e(y,{key:"5",class:f({"ant-menu-item-selected":d.route().current("user.konkurs.yearly")})},{icon:o(()=>[e(i)]),default:o(()=>[e(m,{href:d.route("user.konkurs.yearly")},{default:o(()=>[u(" Yearly Konkurs ")]),_:1},8,["href"])]),_:1},8,["class"])]),_:1},8,["openKeys","selectedKeys"])]),_:1}),e(O,{span:19,order:2},{default:o(()=>[e(F,{style:{width:"100%",height:"100%",padding:"0px"}},{default:o(()=>[e(R,{title:"Today Konkurs List",description:"https://w2.brreg.no/kunngjoring/index.jsp"}),e(D),e(r,{style:{"margin-bottom":"16px"}},{default:o(()=>[e(_,{type:"primary",onClick:t.ExportToExcel},{icon:o(()=>[e(n)]),default:o(()=>[u(" Export to Excel ")]),_:1},8,["onClick"]),e(_,{type:"primary",onClick:d.ExportToCSV},{icon:o(()=>[e(s)]),default:o(()=>[u(" Export to CSV ")]),_:1},8,["onClick"])]),_:1}),e(B,{columns:t.columns,"data-source":t.TodayKonkurs,pagination:d.pagination,loading:t.loading,showSizeChanger:"true","row-selection":t.rowSelection,rowKey:l=>l.id,onChange:d.handleTableChange},{konkurs_name:o(({text:l,record:K})=>[Y("a",{href:"#"+K.id,onClick:ee(me=>t.ShowKonkur(K.id),["prevent"])},v(l)+" "+v(l.length>10?"...":""),9,ie)]),created_at:o(({text:l})=>[u(v(t.moment(l).format("DD MMMM, YYYY")),1)]),konkurs_category_id:o(({text:l})=>[u(v(t.getCategoryName(l)),1)]),email_send:o(({text:l})=>[l==1?(A(),z(I,{key:0,color:"green"},{default:o(()=>[u("Yes")]),_:1})):(A(),z(I,{key:1,color:"red"},{default:o(()=>[u("No")]),_:1}))]),action:o(({record:l})=>[Y("span",null,[e(r,{size:"middle"},{default:o(()=>[e(N,{title:"Send Mail"},{default:o(()=>[e(_,{type:"primary",size:"medium",shape:"square",onClick:K=>t.SendKonkursMail(l.id)},{icon:o(()=>[e(P)]),_:2},1032,["onClick"])]),_:2},1024),e(N,{title:"Delete"},{default:o(()=>[e(_,{type:"danger",size:"medium",shape:"square",onClick:K=>t.deleteKonkurs(l.id)},{icon:o(()=>[e(W)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["columns","data-source","pagination","loading","row-selection","rowKey","onChange"]),e(U,{visible:t.ShowKonkursVisible,onClose:c[3]||(c[3]=l=>t.ShowKonkursVisible=!1),id:d.ShowKonkursId,konkurs:t.konkurs},null,8,["visible","id","konkurs"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const we=le(ce,[["render",ke]]);export{we as default};
